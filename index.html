<!DOCTYPE html>
<html lang="en">

<head>
	<title>convForm - example</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
		integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="dist/jquery.convform.css">
	<link rel="stylesheet" type="text/css" href="demo.css">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
		crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
		integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
		integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
		crossorigin="anonymous"></script>
</head>

<body>
	<div class="modal fade" id="info-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
		aria-hidden="true">
		<div class="modal-lg modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title"></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
					<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
				</div>
			</div>
		</div>
	</div>
	<section id="demo">
		<div class="vertical-align">
			<div class="container">
				<div class="row">
					<!-- <div class="col-sm-6 col-sm-offset-1 col-xs-offset-0"> -->
					<div class="col-lg-6">
						<div class="card no-border">
							<div id="chat">
								<form action="" method="GET" class="hidden">
									<input
										data-conv-question="你好！"
										name="first-question">
								</form>
							</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div class="row">
							<div class="offset-2">
								<div id="btn-group" class="btn-group btn-group-toggle" data-toggle="buttons">
									<label class="btn btn-info active">
										<input type="radio" name="options" value="full" checked> 综合模型
									</label>
									<label class="btn btn-info">
										<input type="radio" name="options" value="DSM"> DSM
									</label>
									<label class="btn btn-info">
										<input type="radio" name="options" value="Bayesian"> 贝叶斯模型
									</label>
									<label class="btn btn-info">
										<input type="radio" name="options" value="sentimental"> 情绪模型
									</label>
									<label class="btn btn-info">
										<input type="radio" name="options" value="DL"> 深度模型
									</label>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div id="doctor_stat" style="width:640px;height:600px;">
								</div>
							</div>
							</div>
						</div>
				</div>
			</div>
		</div>
		</div>
	</section>
	<!-- <script type="text/javascript" src="jquery-1.12.3.min.js"></script> -->
	<script type="text/javascript" src="dist/autosize.min.js"></script>
	<script type="text/javascript" src="dist/jquery.convform.js"></script>
	<script type="text/javascript" src="js/commu.js"></script>
	<script type="text/javascript" src="dist/echarts.js"></script>
	<script type="text/javascript" src="js/visualization.js"></script>
	<script type="text/javascript" src="js/visualization_dr.js"></script>
	<script type="text/javascript" src="js/chatbot.js"></script>
	<script type="text/javascript">
		var dr_chart;
		var data;
		function gen_random_data() {
			data = {
				full: [ {name: 'D', value: Math.floor(Math.random()*100), explanation: {"D解释1": "balabala", "D解释2": "balabala"}}, 
						{name: 'C', value: Math.floor(Math.random()*100), explanation: {"C解释1": "balabala", "C解释2": "balabala"}},
						{name: 'B', value: Math.floor(Math.random()*100), explanation: {"B解释1": "balabala", "B解释2": "balabala"}},
						{name: 'A', value: Math.floor(Math.random()*100), explanation: {"A解释1": "balabala", "A解释2": "balabala"}}],
				DSM: [ {name: 'D', value: Math.floor(Math.random()*100), explanation: {"D解释1": "balabala", "D解释2": "balabala"}}, 
						{name: 'C', value: Math.floor(Math.random()*100), explanation: {"C解释1": "balabala", "C解释2": "balabala"}},
						{name: 'B', value: Math.floor(Math.random()*100), explanation: {"B解释1": "balabala", "B解释2": "balabala"}},
						{name: 'A', value: Math.floor(Math.random()*100), explanation: {"A解释1": "balabala", "A解释2": "balabala"}}],
				Bayesian: [{name: 'D', value: Math.floor(Math.random()*100), explanation: {"D解释1": "balabala", "D解释2": "balabala"}}, 
						{name: 'C', value: Math.floor(Math.random()*100), explanation: {"C解释1": "balabala", "C解释2": "balabala"}},
						{name: 'B', value: Math.floor(Math.random()*100), explanation: {"B解释1": "balabala", "B解释2": "balabala"}},
						{name: 'A', value: Math.floor(Math.random()*100), explanation: {"A解释1": "balabala", "A解释2": "balabala"}}],
				sentimental: [{name: 'D', value: Math.floor(Math.random()*100), explanation: {"D解释1": "balabala", "D解释2": "balabala"}}, 
						{name: 'C', value: Math.floor(Math.random()*100), explanation: {"C解释1": "balabala", "C解释2": "balabala"}},
						{name: 'B', value: Math.floor(Math.random()*100), explanation: {"B解释1": "balabala", "B解释2": "balabala"}},
						{name: 'A', value: Math.floor(Math.random()*100), explanation: {"A解释1": "balabala", "A解释2": "balabala"}}],
				DL: [{name: 'D', value: Math.floor(Math.random()*100), explanation: {"D解释1": "balabala", "D解释2": "balabala"}}, 
						{name: 'C', value: Math.floor(Math.random()*100), explanation: {"C解释1": "balabala", "C解释2": "balabala"}},
						{name: 'A', value: Math.floor(Math.random()*100), explanation: {"A解释1": "balabala", "A解释2": "balabala"}}]
			};
		}
		jQuery(function ($) {
			$(document).ready(function () {
				dr_chart = echarts.init(document.getElementById('doctor_stat'));
				gen_random_data();
				update_dr_data(dr_chart, data.full);
				fill_explanation("#info-modal", data, 'full');

				$("#btn-group :input").on("change",function () {
					update_dr_data(dr_chart, data[this.value]);
					fill_explanation("#info-modal", data, this.value);
				});

				dr_chart.on('click', function(p){
					// alert(p.paramIdx);
					$('#info-modal').one('shown.bs.modal', function () {
						$(".modal-body").animate({ scrollTop: $("#" + p.dataIndex).offset().top - 100}, 50);
						$("#" + p.dataIndex).animate({ backgroundColor: "#fabedb" }).delay(100).animate({ backgroundColor: "transparent" }, 1000);
					});
					$("#info-modal").modal("show");
					// requestAnimationFrame(() => $(".modal-body").animate({scrollTop: $("#" + p.dataIndex).offset().top - 40}, 0));
				});
			});
		});
	</script>

</body>

</html>